// name: cons
// stdout:
//   1
//   2
//   3

union List tagged = Cons | Nil;
shape Cons tag List {
    head: Int,
    tail: List,
}
shape Nil tag List { }
val nil = Nil();

fun cons(head: Int, tail: List) -> List {
    return Cons(head=head, tail=tail);
}

fun printInts(list: List) !io -> Unit {
    if (list is Cons) {
        print(intToString(list.head) + "\n");
        printInts(list.tail);
    }
}

fun main() !io -> Unit {
    val list = cons(1, cons(2, cons(3, nil)));
    printInts(list);
}
